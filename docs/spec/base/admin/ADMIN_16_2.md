# SWORD API JSON-LD

## 目的・用途

本機能は、メタデータ形式がJSON-LDのZIPファイルをSWORD APIを利用して登録する際の設定を行う機能である。

## 利用方法

管理者は、【Administration > SWORD API > JSON-LD】を開き、設定を行う。

## 利用可能なロール

|  ロール  | システム管理者 | リポジトリ管理者 | コミュニティ管理者 | 登録ユーザー | 一般ユーザー | ゲスト(未ログイン) |
| -------- | :------------: | :--------------: | :----------------: | :----------: | :----------: | :----------------: |
| 利用可否 |       〇       |        〇        |         ×         |      ×      |      ×      |        ×          |


## 機能内容

SWORD APIを利用してメタデータがJSON-LD形式で記述されたZIPファイルを登録する際に使用する登録方式の設定を可能とする。

- TSV/XMLの場合と異なり、OAuth認証で使用するアプリケーションごとに設定を行う。
- 一覧からアプリケーションを選択し、設定の変更・閲覧・削除ができる。
- 設定項目
  - アプリケーション
  - 機能の有効化
  - 登録方式（直接登録 or ワークフローを経由した登録）
  - 使用するワークフローの選択
  - 使用するマッピング定義
  - メタデータ自動補完機能で使用するWebAPIの優先順位


## 関連モジュール

  - weko_admin：設定画面を提供するモジュール

  - weko_record：マッピング定義を提供するモジュール
  
  - weko_swordserver：SWORD API利用してアイテム登録機能を提供するモジュール

  - weko_workflow：ワークフローを提供するモジュール

## 関連テーブル

  - sword_client：設定情報を保持するテーブル

## 処理概要

### 一覧表示

- 設定が登録済みのアプリケーションを一覧表示する。
- 一覧の表示項目は、
  - アプリケーション名
  - 登録方式（直接登録 or ワークフローを経由した登録）
  - 使用するワークフロー
  - DOIによるメタデータ入力支援機能の有効/無効

### 新規作成、編集画面

- アプリケーション名
  - プルダウンからアプリケーションを選択する。
- 機能の有効化
  - チェックボックスの値に応じて真偽値を永続化する。
- 登録方式（直接登録 or ワークフローを経由した登録）
  - ラジオボタンで登録方式を選択し、選択値を永続化する。
- 使用するワークフローの選択
  - ドロップダウンリストでワークフローを選択し、選択値を永続化する。
  - 登録方式にワークフローを選択した時のみ活性化する。
- 使用するマッピング定義
  - ドロップダウンリストでマッピング定義を選択し、選択値を永続化する。
  - 登録方式にワークフローを選択した時は、ワークフローに設定されたアイテムタイプとマッピング先が一致する定義に絞って表示する。
- マッピング定義の整合性表示
  - 選択したマッピング定義の整合性チェックが行われ、エラーがなければ「✔」、エラーがあれば「✘」を表示する。
- メタデータ自動補完機能で使用するWebAPIの優先順位
  - 使用するAPI、優先順位を設定する。

## 変更履歴
## 変更履歴

| 日付       | GitHubコミットID                           | 更新内容                                        |
| ---------- | ------------------------------------------ | ----------------------------------------------- |
| 2024/03/09 |                                            | 初版作成                                        |
