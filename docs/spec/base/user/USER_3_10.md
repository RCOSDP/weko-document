### 所属コミュニティ情報表示

  - > 目的・用途

本機能は、アイテムが所属するコミュニティ情報を表示する機能である。

  - > 利用方法

コミュニティ情報表示は、アイテム詳細画面の右端のcommunityエリアに表示される。

  - > 利用可能なロール

<table>
<thead>
<tr class="header">
<th>ロール</th>
<th>システム<br />
管理者</th>
<th>リポジトリ<br />
管理者</th>
<th>コミュニティ<br />
管理者</th>
<th>登録ユーザー</th>
<th>一般ユーザー</th>
<th>ゲスト<br />
(未ログイン)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>利用可否</td>
<td>○</td>
<td>○</td>
<td>○</td>
<td>○</td>
<td>○</td>
<td>○</td>
</tr>
</tbody>
</table>

  - > 機能内容

<!-- end list -->

  - アイテム詳細画面の右端のcommunityエリアに情報を表示する。
  - アイテムの属するインデックスに紐づいているコミュニティが存在する場合、  
    communityエリア内に該当のコミュニティ情報を表示する。 
    属するコミュニティが存在しない場合、communityエリア内は空の状態となる

  - 表示情報  
    表示情報は以下となる。  
    複数のコミュニティに属する場合、件数分の情報を表示する。

      - コミュニティロゴ  
        ロゴが設定されている場合は50×50pxで表示する。  
        元の画像サイズがそれより大きい場合、縮小して表示する。  

      - コミュニティタイトル  
        コミュニティTOPページへのリンク形式で表示する。  
        コミュニティタイトルの設定がない場合、コミュニティIDを同様のリンク形式で表示する。

<!-- end list -->

  - > 関連モジュール

<!-- end list -->

  - > 対応しているモジュール：「weko\_records\_ui」

<!-- end list -->

  - > 処理概要

> アイテムの属するインデックスのIDから、紐づくコミュニティ情報を取得する。  
  communities_communityテーブルのroot_node_idカラムがインデックスのIDとなっているため、  
  紐づくコミュニティのレコードを特定し、同テーブルから表示情報を取得する。

  - > 更新履歴

<table>
<thead>
<tr class="header">
<th>日付</th>
<th>GitHubコミットID</th>
<th>更新内容</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><blockquote>
<p>2024/12/18</p>
</blockquote></td>
<td>**********</td>
<td>初版作成</td>
</tr>
</tbody>
</table>